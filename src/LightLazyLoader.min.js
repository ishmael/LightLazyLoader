function LightLazyImages(){this.lazyElems=Array.prototype.slice.call(document.querySelectorAll("span.lazy-image")),this.prepareData(),this.bindEvents()}LightLazyImages.prototype.checkElements=function(){for(var e,t=0,a=this.lazyElems.length;a>t&&(e=this.isInView(this.lazyElems[t]),e);t++)this.createImage(this.lazyElems[t])},LightLazyImages.prototype.prepareData=function(){var e=function(e,t){var a=e.getBoundingClientRect(),i=t.getBoundingClientRect();return a.top<i.top?-1:a.top>i.top?1:0};this.lazyElems=this.lazyElems.sort(e),this.checkElements()},LightLazyImages.prototype.createImage=function(e){var t=document.createElement("img"),a=e.className.replace("lazy-image"," lazy-image-processed ");e.className+=" lazy-image-processing",t.className+=a,t.setAttribute("src",e.dataset.src),t.onload=function(){e.parentNode.replaceChild(t,e),t.className=t.className.replace("lazy-image-processing","")},e.converted=!0},LightLazyImages.prototype.bindEvents=function(){var e=this,t={attributes:!1,childList:!0,characterData:!1,subtree:!0},a=new MutationObserver(function(){e.lazyElems=Array.prototype.slice.call(document.querySelectorAll("span.lazy-image:not(.lazy-image-processing)")),e.prepareData()});window.onscroll=this.checkElements.bind(this),window.onresize=this.checkElements.bind(this),window.onload=this.checkElements.bind(this),a.observe(document.body,t)},LightLazyImages.prototype.isInView=function(e){if(void 0===e)return!1;var t=e.getBoundingClientRect(),a=(t.top>=0&&t.left>=0&&t.top)<=(window.innerHeight||document.documentElement.clientHeight),i=t.left<=(window.innerWidth||document.documentElement.clientWidth);return a&&i},new LightLazyImages;
