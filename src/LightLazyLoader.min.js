function LightLazyImages(){this.lazyElems=Array.prototype.slice.call(document.querySelectorAll("span.lazy-image")),this.prepareData(),this.bindEvents()}LightLazyImages.prototype.checkElements=function(){for(var e,t=0,i=this.lazyElems.length;i>t&&(e=this.isInView(this.lazyElems[t]),e);t++)this.createImage(this.lazyElems[t]),this.lazyElems=this.lazyElems.filter(this.convertedFilter)},LightLazyImages.prototype.convertedFilter=function(e){return!e.converted},LightLazyImages.prototype.prepareData=function(){var e=function(e,t){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();return i.top<n.top?-1:i.top>n.top?1:0};this.lazyElems=this.lazyElems.sort(e),this.checkElements()},LightLazyImages.prototype.createImage=function(e){var t=document.createElement("img"),i=e.className.replace("lazy-image"," lazy-image-processed ");t.className+=i,t.setAttribute("src",e.dataset.src),e.parentNode.replaceChild(t,e),e.converted=!0},LightLazyImages.prototype.bindEvents=function(){var e=this,t={attributes:!1,childList:!0,characterData:!1,subtree:!0},i=new MutationObserver(function(){this.lazyElems=Array.prototype.slice.call(document.querySelectorAll("span.lazy-image")),e.prepareData()});window.onscroll=this.checkElements.bind(this),window.onresize=this.checkElements.bind(this),window.onload=this.checkElements.bind(this),i.observe(document.body,t)},LightLazyImages.prototype.isInView=function(e){var t=e.getBoundingClientRect(),i=(t.top>=0&&t.left>=0&&t.top)<=(window.innerHeight||document.documentElement.clientHeight),n=t.left<=(window.innerWidth||document.documentElement.clientWidth);return i&&n},new LightLazyImages;
